!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t,z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t=function(Tt,_t){var At={beforeShow:t,move:t,change:t,show:t,hide:t,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},Et=[],Ht=!!/msie/i.exec(window.navigator.userAgent),Ot=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),Mt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Nt=function(){var t="";if(Ht)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function Rt(t,e,n,o){for(var i=[],a=0;a<t.length;a++){var r=t[a];if(r){var l=tinycolor(r),s=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";s+=tinycolor.equals(e,r)?" sp-thumb-active":"";var c=l.toString(o.preferredFormat||"rgb"),d=Ot?"background-color:"+l.toRgbString():"filter:"+l.toFilter();i.push('<span title="'+c+'" data-color="'+l.toRgbString()+'" class="'+s+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{i.push(Tt("<div />").append(Tt('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+i.join("")+"</div>"}function e(t,e){var c=function(t,e){var n=Tt.extend({},At,t);return n.callbacks={move:jt(n.move,e),change:jt(n.change,e),show:jt(n.show,e),hide:jt(n.hide,e),beforeShow:jt(n.beforeShow,e)},n}(e,t),o=c.flat,n=c.showSelectionPalette,i=c.localStorageKey,a=c.theme,r=c.callbacks,l=function(n,o,i){var a;return function(){var t=this,e=arguments;i&&clearTimeout(a),!i&&a||(a=setTimeout(function(){a=null,n.apply(t,e)},o))}}(Ft,10),s=!1,d=!1,u=0,p=0,h=0,f=0,g=0,b=0,m=0,y=0,v=0,k=0,w=1,x=[],S=[],C={},P=c.selectionPalette.slice(0),F=c.maxSelectionSize,I="sp-dragging",L=null,T=t.ownerDocument,_=(T.body,Tt(t)),A=!1,E=Tt(Nt,T).addClass(a),H=E.find(".sp-picker-container"),O=E.find(".sp-color"),M=E.find(".sp-dragger"),N=E.find(".sp-hue"),R=E.find(".sp-slider"),z=E.find(".sp-alpha-inner"),j=E.find(".sp-alpha"),B=E.find(".sp-alpha-handle"),D=E.find(".sp-input"),q=E.find(".sp-palette"),V=E.find(".sp-initial"),U=E.find(".sp-cancel"),$=E.find(".sp-clear"),G=E.find(".sp-choose"),X=E.find(".sp-palette-toggle"),W=_.is("input"),J=W&&"color"===_.attr("type")&&Dt(),K=W&&!o,Y=K?Tt(Mt).addClass(a).addClass(c.className).addClass(c.replacerClassName):Tt([]),Q=K?Y:_,Z=Y.find(".sp-preview-inner"),tt=c.color||W&&_.val(),et=!1,nt=c.preferredFormat,ot=!c.showButtons||c.clickoutFiresChange,it=!tt,at=c.allowEmpty&&!J;function rt(){if(c.showPaletteOnly&&(c.showPalette=!0),X.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),c.palette){x=c.palette.slice(0),S=Tt.isArray(x[0])?x:[x],C={};for(var t=0;t<S.length;t++)for(var e=0;e<S[t].length;e++){var n=tinycolor(S[t][e]).toRgbString();C[n]=!0}}E.toggleClass("sp-flat",o),E.toggleClass("sp-input-disabled",!c.showInput),E.toggleClass("sp-alpha-enabled",c.showAlpha),E.toggleClass("sp-clear-enabled",at),E.toggleClass("sp-buttons-disabled",!c.showButtons),E.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly),E.toggleClass("sp-palette-disabled",!c.showPalette),E.toggleClass("sp-palette-only",c.showPaletteOnly),E.toggleClass("sp-initial-disabled",!c.showInitial),E.addClass(c.className).addClass(c.containerClassName),Ft()}function lt(){if(i&&window.localStorage){try{var t=window.localStorage[i].split(",#");1<t.length&&(delete window.localStorage[i],Tt.each(t,function(t,e){st(e)}))}catch(t){}try{P=window.localStorage[i].split(";")}catch(t){}}}function st(t){if(n){var e=tinycolor(t).toRgbString();if(!C[e]&&-1===Tt.inArray(e,P))for(P.push(e);P.length>F;)P.shift();if(i&&window.localStorage)try{window.localStorage[i]=P.join(";")}catch(t){}}}function ct(){var n=wt(),t=Tt.map(S,function(t,e){return Rt(t,n,"sp-palette-row sp-palette-row-"+e,c)});lt(),P&&t.push(Rt(function(){var t=[];if(c.showPalette)for(var e=0;e<P.length;e++){var n=tinycolor(P[e]).toRgbString();C[n]||t.push(P[e])}return t.reverse().slice(0,c.maxSelectionSize)}(),n,"sp-palette-row sp-palette-row-selection",c)),q.html(t.join(""))}function dt(){if(c.showInitial){var t=et,e=wt();V.html(Rt([t,e],e,"sp-palette-row-initial",c))}}function ut(){(p<=0||u<=0||f<=0)&&Ft(),d=!0,E.addClass(I),L=null,_.trigger("dragstart.spectrum",[wt()])}function pt(){d=!1,E.removeClass(I),_.trigger("dragstop.spectrum",[wt()])}function ht(){var t=D.val();if(null!==t&&""!==t||!at){var e=tinycolor(t);e.isValid()?(kt(e),xt(),Pt()):D.addClass("sp-validation-error")}else kt(null),xt(),Pt()}function ft(){s?yt():gt()}function gt(){var t=Tt.Event("beforeShow.spectrum");s?Ft():(_.trigger(t,[wt()]),!1===r.beforeShow(wt())||t.isDefaultPrevented()||(function(){for(var t=0;t<Et.length;t++)Et[t]&&Et[t].hide()}(),s=!0,Tt(T).on("keydown.spectrum",bt),Tt(T).on("click.spectrum",mt),Tt(window).on("resize.spectrum",l),Y.addClass("sp-active"),E.removeClass("sp-hidden"),Ft(),St(),et=wt(),dt(),r.show(et),_.trigger("show.spectrum",[et])))}function bt(t){27===t.keyCode&&yt()}function mt(t){2!=t.button&&(d||(ot?Pt(!0):vt(),yt()))}function yt(){s&&!o&&(s=!1,Tt(T).off("keydown.spectrum",bt),Tt(T).off("click.spectrum",mt),Tt(window).off("resize.spectrum",l),Y.removeClass("sp-active"),E.addClass("sp-hidden"),r.hide(wt()),_.trigger("hide.spectrum",[wt()]))}function vt(){kt(et,!0),Pt(!0)}function kt(t,e){var n,o;tinycolor.equals(t,wt())?St():(!t&&at?it=!0:(it=!1,o=(n=tinycolor(t)).toHsv(),y=o.h%360/360,v=o.s,k=o.v,w=o.a),St(),n&&n.isValid()&&!e&&(nt=c.preferredFormat||n.getFormat()))}function wt(t){return t=t||{},at&&it?null:tinycolor.fromRatio({h:y,s:v,v:k,a:Math.round(1e3*w)/1e3},{format:t.format||nt})}function xt(){St(),r.move(wt()),_.trigger("move.spectrum",[wt()])}function St(){D.removeClass("sp-validation-error"),Ct();var t=tinycolor.fromRatio({h:y,s:1,v:1});O.css("background-color",t.toHexString());var e=nt;w<1&&(0!==w||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var n=wt({format:e}),o="";if(Z.removeClass("sp-clear-display"),Z.css("background-color","transparent"),!n&&at)Z.addClass("sp-clear-display");else{var i=n.toHexString(),a=n.toRgbString();if(Ot||1===n.alpha?Z.css("background-color",a):(Z.css("background-color","transparent"),Z.css("filter",n.toFilter())),c.showAlpha){var r=n.toRgb();r.a=0;var l=tinycolor(r).toRgbString(),s="linear-gradient(left, "+l+", "+i+")";Ht?z.css("filter",tinycolor(l).toFilter({gradientType:1},i)):(z.css("background","-webkit-"+s),z.css("background","-moz-"+s),z.css("background","-ms-"+s),z.css("background","linear-gradient(to right, "+l+", "+i+")"))}o=n.toString(e)}c.showInput&&D.val(o),c.showPalette&&ct(),dt()}function Ct(){var t=v,e=k;if(at&&it)B.hide(),R.hide(),M.hide();else{B.show(),R.show(),M.show();var n=t*u,o=p-e*p;n=Math.max(-h,Math.min(u-h,n-h)),o=Math.max(-h,Math.min(p-h,o-h)),M.css({top:o+"px",left:n+"px"});var i=w*g;B.css({left:i-b/2+"px"});var a=y*f;R.css({top:a-m+"px"})}}function Pt(t){var e=wt(),n="",o=!tinycolor.equals(e,et);e&&(n=e.toString(nt),st(e)),W&&_.val(n),t&&o&&(r.change(e),_.trigger("change",[e]))}function Ft(){s&&(u=O.width(),p=O.height(),h=M.height(),N.width(),f=N.height(),m=R.height(),g=j.width(),b=B.width(),o||(E.css("position","absolute"),c.offset?E.offset(c.offset):E.offset(function(t,e){var n=t.outerWidth(),o=t.outerHeight(),i=e.outerHeight(),a=t[0].ownerDocument,r=a.documentElement,l=r.clientWidth+Tt(a).scrollLeft(),s=r.clientHeight+Tt(a).scrollTop(),c=e.offset(),d=c.left,u=c.top;return u+=i,d-=Math.min(d,l<d+n&&n<l?Math.abs(d+n-l):0),{top:u-=Math.min(u,s<u+o&&o<s?Math.abs(o+i-0):0),bottom:c.bottom,left:d,right:c.right,width:c.width,height:c.height}}(E,Q))),Ct(),c.showPalette&&ct(),_.trigger("reflow.spectrum"))}function It(){yt(),A=!0,_.attr("disabled",!0),Q.addClass("sp-disabled")}!function(){if(Ht&&E.find("*:not(input)").attr("unselectable","on"),rt(),K&&_.after(Y).hide(),at||$.hide(),o)_.after(E).hide();else{var t="parent"===c.appendTo?_.parent():Tt(c.appendTo);1!==t.length&&(t=Tt("body")),t.append(E)}function e(t){return t.data&&t.data.ignore?(kt(Tt(t.target).closest(".sp-thumb-el").data("color")),xt()):(kt(Tt(t.target).closest(".sp-thumb-el").data("color")),xt(),c.hideAfterPaletteSelect?(Pt(!0),yt()):Pt()),!1}lt(),Q.on("click.spectrum touchstart.spectrum",function(t){A||ft(),t.stopPropagation(),Tt(t.target).is("input")||t.preventDefault()}),(_.is(":disabled")||!0===c.disabled)&&It(),E.click(zt),D.change(ht),D.on("paste",function(){setTimeout(ht,1)}),D.keydown(function(t){13==t.keyCode&&ht()}),U.text(c.cancelText),U.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),vt(),yt()}),$.attr("title",c.clearText),$.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),it=!0,xt(),o&&Pt(!0)}),G.text(c.chooseText),G.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Ht&&D.is(":focus")&&D.trigger("change"),D.hasClass("sp-validation-error")||(Pt(!0),yt())}),X.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),X.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),c.showPaletteOnly=!c.showPaletteOnly,c.showPaletteOnly||o||E.css("left","-="+(H.outerWidth(!0)+5)),rt()}),Bt(j,function(t,e,n){w=t/g,it=!1,n.shiftKey&&(w=Math.round(10*w)/10),xt()},ut,pt),Bt(N,function(t,e){y=parseFloat(e/f),it=!1,c.showAlpha||(w=1),xt()},ut,pt),Bt(O,function(t,e,n){if(n.shiftKey){if(!L){var o=v*u,i=p-k*p,a=Math.abs(t-o)>Math.abs(e-i);L=a?"x":"y"}}else L=null;var r=!L||"y"===L;(!L||"x"===L)&&(v=parseFloat(t/u)),r&&(k=parseFloat((p-e)/p)),it=!1,c.showAlpha||(w=1),xt()},ut,pt),tt?(kt(tt),St(),nt=c.preferredFormat||tinycolor(tt).format,st(tt)):St(),o&&gt();var n=Ht?"mousedown.spectrum":"click.spectrum touchstart.spectrum";q.on(n,".sp-thumb-el",e),V.on(n,".sp-thumb-el:nth-child(1)",{ignore:!0},e)}();var Lt={show:gt,hide:yt,toggle:ft,reflow:Ft,option:function(t,e){return t===_t?Tt.extend({},c):e===_t?c[t]:(c[t]=e,"preferredFormat"===t&&(nt=c.preferredFormat),void rt())},enable:function(){A=!1,_.attr("disabled",!1),Q.removeClass("sp-disabled")},disable:It,offset:function(t){c.offset=t,Ft()},set:function(t){kt(t),Pt()},get:wt,destroy:function(){_.show(),Q.off("click.spectrum touchstart.spectrum"),E.remove(),Y.remove(),Et[Lt.id]=null},container:E};return Lt.id=Et.push(Lt)-1,Lt}function t(){}function zt(t){t.stopPropagation()}function jt(t,e){var n=Array.prototype.slice,o=n.call(arguments,2);return function(){return t.apply(e,o.concat(n.call(arguments)))}}function Bt(r,l,e,t){l=l||function(){},e=e||function(){},t=t||function(){};var s=document,c=!1,d={},u=0,p=0,h="ontouchstart"in window,n={};function f(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function o(t){if(c){if(Ht&&s.documentMode<9&&!t.button)return g();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],n=e&&e.pageX||t.pageX,o=e&&e.pageY||t.pageY,i=Math.max(0,Math.min(n-d.left,p)),a=Math.max(0,Math.min(o-d.top,u));h&&f(t),l.apply(r,[i,a,t])}}function g(){c&&(Tt(s).off(n),Tt(s.body).removeClass("sp-dragging"),setTimeout(function(){t.apply(r,arguments)},0)),c=!1}n.selectstart=f,n.dragstart=f,n["touchmove mousemove"]=o,n["touchend mouseup"]=g,Tt(r).on("touchstart mousedown",function(t){(t.which?3==t.which:2==t.button)||c||!1!==e.apply(r,arguments)&&(c=!0,u=Tt(r).height(),p=Tt(r).width(),d=Tt(r).offset(),Tt(s).on(n),Tt(s.body).addClass("sp-dragging"),o(t),f(t))})}function Dt(){return Tt.fn.spectrum.inputTypeColorSupport()}var a="spectrum.id";Tt.fn.spectrum=function(n,t){if("string"!=typeof n)return this.spectrum("destroy").each(function(){var t=e(this,Tt.extend({},Tt(this).data(),n));Tt(this).data(a,t.id)});var o=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=Et[Tt(this).data(a)];if(t){var e=t[n];if(!e)throw new Error("Spectrum: no such method: '"+n+"'");"get"==n?o=t.get():"container"==n?o=t.container:"option"==n?o=t.option.apply(t,i):"destroy"==n?(t.destroy(),Tt(this).removeData(a)):e.apply(t,i)}}),o},Tt.fn.spectrum.load=!0,Tt.fn.spectrum.loadOpts={},Tt.fn.spectrum.draggable=Bt,Tt.fn.spectrum.defaults=At,Tt.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var e=Tt("<input type='color'/>")[0];t._cachedResult="color"===e.type&&""!==e.value}return t._cachedResult},Tt.spectrum={},Tt.spectrum.localization={},Tt.spectrum.palettes={},Tt.fn.spectrum.processNativeColorInputs=function(){var t=Tt("input[type=color]");t.length&&!Dt()&&t.spectrum({preferredFormat:"hex6"})},function(){var a=/^[\s,#]+/,r=/\s+$/,i=0,c=Math,l=c.round,d=c.min,u=c.max,t=c.random,p=function t(e,n){if(n=n||{},(e=e||"")instanceof t)return e;if(!(this instanceof t))return new t(e,n);var o=function(t){var e={r:0,g:0,b:0},n=1,o=!1,i=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(r,"").toLowerCase();var e,n=!1;if(F[t])t=F[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=R.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=R.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=R.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=R.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=R.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=R.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=R.hex8.exec(t))return{a:function(t){return A(t)/255}(e[1]),r:A(e[2]),g:A(e[3]),b:A(e[4]),format:n?"name":"hex8"};if(e=R.hex6.exec(t))return{r:A(e[1]),g:A(e[2]),b:A(e[3]),format:n?"name":"hex"};if(e=R.hex3.exec(t))return{r:A(e[1]+""+e[1]),g:A(e[2]+""+e[2]),b:A(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==(void 0===t?"undefined":z(t))&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=function(t,e,n){return{r:255*T(t,255),g:255*T(e,255),b:255*T(n,255)}}(t.r,t.g,t.b),o=!0,i="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=H(t.s),t.v=H(t.v),e=function(t,e,n){t=6*T(t,360),e=T(e,100),n=T(n,100);var o=c.floor(t),i=t-o,a=n*(1-e),r=n*(1-i*e),l=n*(1-(1-i)*e),s=o%6;return{r:255*[n,r,a,a,l,n][s],g:255*[l,n,n,r,a,a][s],b:255*[a,a,l,n,n,r][s]}}(t.h,t.s,t.v),o=!0,i="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=H(t.s),t.l=H(t.l),e=function(t,e,n){var o,i,a;function r(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=T(t,360),e=T(e,100),n=T(n,100),0===e)o=i=a=n;else{var l=n<.5?n*(1+e):n+e-n*e,s=2*n-l;o=r(s,l,t+1/3),i=r(s,l,t),a=r(s,l,t-1/3)}return{r:255*o,g:255*i,b:255*a}}(t.h,t.s,t.l),o=!0,i="hsl"),t.hasOwnProperty("a")&&(n=t.a));return n=L(n),{ok:o,format:t.format||i,r:d(255,u(e.r,0)),g:d(255,u(e.g,0)),b:d(255,u(e.b,0)),a:n}}(e);this._originalInput=e,this._r=o.r,this._g=o.g,this._b=o.b,this._a=o.a,this._roundA=l(1e3*this._a)/1e3,this._format=n.format||o.format,this._gradientType=n.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=o.ok,this._tc_id=i++};function s(t,e,n){t=T(t,255),e=T(e,255),n=T(n,255);var o,i,a=u(t,e,n),r=d(t,e,n),l=(a+r)/2;if(a==r)o=i=0;else{var s=a-r;switch(i=.5<l?s/(2-a-r):s/(a+r),a){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return{h:o,s:i,l:l}}function h(t,e,n){t=T(t,255),e=T(e,255),n=T(n,255);var o,i,a=u(t,e,n),r=d(t,e,n),l=a,s=a-r;if(i=0===a?0:s/a,a==r)o=0;else{switch(a){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return{h:o,s:i,v:l}}function e(t,e,n,o){var i=[E(l(t).toString(16)),E(l(e).toString(16)),E(l(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,n,o){return[E(function(t){return Math.round(255*parseFloat(t)).toString(16)}(o)),E(l(t).toString(16)),E(l(e).toString(16)),E(l(n).toString(16))].join("")}function n(t,e){e=0===e?0:e||10;var n=p(t).toHsl();return n.s-=e/100,n.s=_(n.s),p(n)}function o(t,e){e=0===e?0:e||10;var n=p(t).toHsl();return n.s+=e/100,n.s=_(n.s),p(n)}function g(t){return p(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var n=p(t).toHsl();return n.l+=e/100,n.l=_(n.l),p(n)}function m(t,e){e=0===e?0:e||10;var n=p(t).toRgb();return n.r=u(0,d(255,n.r-l(-e/100*255))),n.g=u(0,d(255,n.g-l(-e/100*255))),n.b=u(0,d(255,n.b-l(-e/100*255))),p(n)}function y(t,e){e=0===e?0:e||10;var n=p(t).toHsl();return n.l-=e/100,n.l=_(n.l),p(n)}function v(t,e){var n=p(t).toHsl(),o=(l(n.h)+e)%360;return n.h=o<0?360+o:o,p(n)}function k(t){var e=p(t).toHsl();return e.h=(e.h+180)%360,p(e)}function w(t){var e=p(t).toHsl(),n=e.h;return[p(t),p({h:(n+120)%360,s:e.s,l:e.l}),p({h:(n+240)%360,s:e.s,l:e.l})]}function x(t){var e=p(t).toHsl(),n=e.h;return[p(t),p({h:(n+90)%360,s:e.s,l:e.l}),p({h:(n+180)%360,s:e.s,l:e.l}),p({h:(n+270)%360,s:e.s,l:e.l})]}function S(t){var e=p(t).toHsl(),n=e.h;return[p(t),p({h:(n+72)%360,s:e.s,l:e.l}),p({h:(n+216)%360,s:e.s,l:e.l})]}function C(t,e,n){e=e||6,n=n||30;var o=p(t).toHsl(),i=360/n,a=[p(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,a.push(p(o));return a}function P(t,e){e=e||6;for(var n=p(t).toHsv(),o=n.h,i=n.s,a=n.v,r=[],l=1/e;e--;)r.push(p({h:o,s:i,v:a})),a=(a+l)%1;return r}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=L(t),this._roundA=l(1e3*this._a)/1e3,this},toHsv:function(){var t=h(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=h(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),o=l(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+o+"%)":"hsva("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),o=l(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+o+"%)":"hsla("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return f(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*T(this._r,255))+"%",g:l(100*T(this._g,255))+"%",b:l(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*T(this._r,255))+"%, "+l(100*T(this._g,255))+"%, "+l(100*T(this._b,255))+"%)":"rgba("+l(100*T(this._r,255))+"%, "+l(100*T(this._g,255))+"%, "+l(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[e(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,o=this._gradientType?"GradientType = 1, ":"";t&&(n=p(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,o=this._a<1&&0<=this._a;return e||!o||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},p.fromRatio=function(t,e){if("object"==(void 0===t?"undefined":z(t))){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]="a"===o?t[o]:H(t[o]));t=n}return p(t,e)},p.equals=function(t,e){return!(!t||!e)&&p(t).toRgbString()==p(e).toRgbString()},p.random=function(){return p.fromRatio({r:t(),g:t(),b:t()})},p.mix=function(t,e,n){n=0===n?0:n||50;var o,i=p(t).toRgb(),a=p(e).toRgb(),r=n/100,l=2*r-1,s=a.a-i.a,c=1-(o=((o=l*s==-1?l:(l+s)/(1+l*s))+1)/2),d={r:a.r*o+i.r*c,g:a.g*o+i.g*c,b:a.b*o+i.b*c,a:a.a*r+i.a*(1-r)};return p(d)},p.readability=function(t,e){var n=p(t),o=p(e),i=n.toRgb(),a=o.toRgb(),r=n.getBrightness(),l=o.getBrightness(),s=Math.max(i.r,a.r)-Math.min(i.r,a.r)+Math.max(i.g,a.g)-Math.min(i.g,a.g)+Math.max(i.b,a.b)-Math.min(i.b,a.b);return{brightness:Math.abs(r-l),color:s}},p.isReadable=function(t,e){var n=p.readability(t,e);return 125<n.brightness&&500<n.color},p.mostReadable=function(t,e){for(var n=null,o=0,i=!1,a=0;a<e.length;a++){var r=p.readability(t,e[a]),l=125<r.brightness&&500<r.color,s=r.brightness/125*3+r.color/500;(l&&!i||l&&i&&o<s||!l&&!i&&o<s)&&(i=l,o=s,n=p(e[a]))}return n};var F=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=p.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(F);function L(t){return t=parseFloat(t),(isNaN(t)||t<0||1<t)&&(t=1),t}function T(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=d(e,u(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),c.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function _(t){return d(1,u(0,t))}function A(t){return parseInt(t,16)}function E(t){return 1==t.length?"0"+t:""+t}function H(t){return t<=1&&(t=100*t+"%"),t}var O,M,N,R=(M="[\\s|\\(]+("+(O="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",N="[\\s|\\(]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",{rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+N),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=p}(),Tt(function(){Tt.fn.spectrum.load&&Tt.fn.spectrum.processNativeColorInputs()})},"function"==typeof define&&define.amd?define(["jquery"],t):"object"==("undefined"==typeof exports?"undefined":z(exports))&&"object"==("undefined"==typeof module?"undefined":z(module))?module.exports=t(require("jquery")):t(jQuery),function(){var s=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:n,mimeType:function(t){var e=n(t).toLowerCase();return function(){var t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[e]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):function(a){return new Promise(function(t){for(var e=window.atob(a.toDataURL().split(",")[1]),n=e.length,o=new Uint8Array(n),i=0;i<n;i++)o[i]=e.charCodeAt(i);t(new Blob([o],{type:"image/png"}))})}(e)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),o=n.createElement("base");n.head.appendChild(o);var i=n.createElement("a");return n.body.appendChild(i),o.href=e,i.href=t,i.href},getAndEncode:function(a){r.impl.options.cacheBust&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());return new Promise(function(n){var t,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status)return void(t?n(t):i("cannot fetch resource: "+a+", status: "+o.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(o.response)},o.ontimeout=function(){t?n(t):i("timeout of 30000ms occured while fetching resource: "+a)},o.responseType="blob",o.timeout=3e4,o.open("GET",a,!0),o.send(),r.impl.options.imagePlaceholder){var e=r.impl.options.imagePlaceholder.split(/,/);e&&e[1]&&(t=e[1])}function i(t){console.error(t),n("")}})},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(n){return function(e){return new Promise(function(t){setTimeout(function(){t(e)},n)})}},asArray:function(t){for(var e=[],n=t.length,o=0;o<n;o++)e.push(t[o]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(o){return new Promise(function(t,e){var n=new Image;n.onload=function(){t(n)},n.onerror=e,n.src=o})},width:function(t){var e=o(t,"border-left-width"),n=o(t,"border-right-width");return t.scrollWidth+e+n},height:function(t){var e=o(t,"border-top-width"),n=o(t,"border-bottom-width");return t.scrollHeight+e+n}};function n(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function o(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),i=function(){var o=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,o,i){return t(e)?Promise.resolve(e).then(n).then(function(t){var n=Promise.resolve(e);return t.forEach(function(e){n=n.then(function(t){return a(t,e,o,i)})}),n}):Promise.resolve(e)},shouldProcess:t,impl:{readUrls:n,inline:a}};function t(t){return-1!==t.search(o)}function n(t){for(var e,n=[];null!==(e=o.exec(t));)n.push(e[1]);return n.filter(function(t){return!s.isDataUrl(t)})}function a(e,n,o,t){return Promise.resolve(n).then(function(t){return o?s.resolveUrl(t,o):t}).then(t||s.getAndEncode).then(function(t){return s.dataAsUrl(t,s.mimeType(n))}).then(function(t){return e.replace(function(t){return new RegExp("(url\\(['\"]?)("+s.escape(t)+")(['\"]?\\))","g")}(n),"$1"+t+"$3")})}}(),t=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(s.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{s.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(t){}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return i.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(t){if(!document.body.getAttribute("data-json"))return;var n=document.body.getAttribute("data-json").split(","),o=[];return t.forEach(function(e){n.forEach(function(t){e.style["font-family"]===String(t)&&o.push(e)})}),o}).then(function(t){return t.map(e)});function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return i.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}(),e=function(){return{inlineAll:function e(t){if(!(t instanceof Element))return Promise.resolve(t);return n(t).then(function(){return t instanceof HTMLImageElement?o(t).inline():Promise.all(s.asArray(t.childNodes).map(function(t){return e(t)}))});function n(e){var t=e.style.getPropertyValue("background");return t?i.inlineAll(t).then(function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))}).then(function(){return e}):Promise.resolve(e)}},impl:{newImage:o}};function o(o){return{inline:function(t){return s.isDataUrl(o.src)?Promise.resolve():Promise.resolve(o.src).then(t||s.getAndEncode).then(function(t){return s.dataAsUrl(t,s.mimeType(o.src))}).then(function(n){return new Promise(function(t,e){o.onload=t,o.onerror=e,o.src=n})})}}}}(),o={imagePlaceholder:void 0,cacheBust:!1},r={toSvg:a,toPng:function(t,e){return n(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return n(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return n(t,e||{}).then(s.canvasToBlob)},toPixelData:function(e,t){return n(e,t||{}).then(function(t){return t.getContext("2d").getImageData(0,0,s.width(e),s.height(e)).data})},impl:{fontFaces:t,images:e,util:s,inliner:i,options:{}}};function a(e,n){return function(t){void 0===t.imagePlaceholder?r.impl.options.imagePlaceholder=o.imagePlaceholder:r.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?r.impl.options.cacheBust=o.cacheBust:r.impl.options.cacheBust=t.cacheBust}(n=n||{}),Promise.resolve(e).then(function(t){return function a(e,n,t){if(!t&&n&&!n(e))return Promise.resolve();return Promise.resolve(e).then(o).then(function(t){return i(e,t,n)}).then(function(t){return r(e,t)});function o(t){return t instanceof HTMLCanvasElement?s.makeImage(t.toDataURL()):t.cloneNode(!1)}function i(t,e,n){var o=t.childNodes;return 0===o.length?Promise.resolve(e):i(e,s.asArray(o),n).then(function(){return e});function i(e,t,n){var o=Promise.resolve();return t.forEach(function(t){o=o.then(function(){return a(t,n)}).then(function(t){t&&e.appendChild(t)})}),o}}function r(r,l){return l instanceof Element?Promise.resolve().then(t).then(e).then(n).then(o).then(function(){return l}):l;function t(){function t(t,e){var n,o;t.cssText?(e.cssText=t.cssText,e.font=t.font):(n=t,o=e,s.asArray(n).forEach(function(t){o.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}))}t(window.getComputedStyle(r),l.style)}function e(){function e(t){var e=window.getComputedStyle(r,t),n=e.getPropertyValue("content");if(""!==n&&"none"!==n){var o=s.uid();l.className=l.className+" "+o;var i=document.createElement("style");i.appendChild(a(o,t,e)),l.appendChild(i)}function a(t,e,n){var o,i,a="."+t+":"+e,r=n.cssText?(i=(o=n).getPropertyValue("content"),o.cssText+" content: "+i+";"):l(n);return document.createTextNode(a+"{"+r+"}");function l(e){return s.asArray(e).map(t).join("; ")+";";function t(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}}}}[":before",":after"].forEach(function(t){e(t)})}function n(){r instanceof HTMLTextAreaElement&&(l.innerHTML=r.value),r instanceof HTMLInputElement&&l.setAttribute("value",r.value)}function o(){l instanceof SVGElement&&(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l instanceof SVGRectElement&&["width","height"].forEach(function(t){var e=l.getAttribute(t);e&&l.style.setProperty(t,e)}))}}}(t,n.filter,!0)}).then(l).then(c).then(function(e){n.bgcolor&&(e.style.backgroundColor=n.bgcolor);n.width&&(e.style.width=n.width+"px");n.height&&(e.style.height=n.height+"px");n.style&&Object.keys(n.style).forEach(function(t){e.style[t]=n.style[t]});return e}).then(function(t){return function(t,e,n){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(s.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(t,n.width||s.width(e),n.height||s.height(e))})}function n(n,o){return a(n,o).then(s.makeImage).then(s.delay(100)).then(function(t){var e=function(t){var e=document.createElement("canvas");if(e.width=o.width||s.width(t),e.height=o.height||s.height(t),o.bgcolor){var n=e.getContext("2d");n.fillStyle=o.bgcolor,n.fillRect(0,0,e.width,e.height)}return e}(n);return e.getContext("2d").drawImage(t,0,0),e})}function l(n){return t.resolveAll().then(function(t){var e=document.createElement("style");return n.appendChild(e),e.appendChild(document.createTextNode(t)),n})}function c(t){return e.inlineAll(t).then(function(){return t})}"undefined"!=typeof module?module.exports=r:window.domtoimage=r}();var i=[{projectId:"114473474859453649",blockId:"155193846444652986",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["词汇","权重"],["生活资源",999],["供热管理",888],["供气质量",777],["生活用水管理",688],["一次供水问题",588],["交通运输",516],["土地资源管理",304],["物业服务与管理",304],["医疗卫生",284],["粉煤灰污染",284],["占道",284],["供热发展",254],["农村土地规划管理",254],["生活噪音",253],["公共设施",223],["供气质量",223],["供电管理",223],["燃气管理",152],["教育管理",152],["政务建设",152],["县区、开发区",152],["宏观经济",152],["教育管理",112],["工业粉尘污染",71],["治安案件",71],["压力容器安全",71],["劳动合同争议",41],["劳动报酬与福利",41],["医疗事故",21],["停供",21],["基础教育",21],["职业教育",21],["物业资质管理",21],["拆迁补偿",21],["设施维护",21],["市场外溢",11],["占道经营",11],["树木管理",11],["农村基础设施",11],["无水",11],["一次供水问题",11]]],url:"",download:!($.fn.RangeSlider=function(t){this.sliderCfg={min:t&&!isNaN(parseFloat(t.min))?Number(t.min):null,max:t&&!isNaN(parseFloat(t.max))?Number(t.max):null,step:t&&Number(t.step)?t.step:1,callback:t&&t.callback?t.callback:null};var e=$(this),n=$(this).parents(".input-container-box").find("input.input-text"),o=$(this).parents(".input-container-box").find(".add"),i=$(this).parents(".input-container-box").find(".desc"),a=this.sliderCfg.min,r=this.sliderCfg.max,l=this.sliderCfg.step,s=this.sliderCfg.callback,c=function(t){e.val(t).css("background-size",t+"% 100%"),n.val(t),$.isFunction(s)&&s(this)};e.attr("min",a).attr("max",r).attr("step",l),e.bind("input",function(t){c(this.value)}),n.bind("input",function(t){var e=0;/^[1-9][0-9]*/.test(this.value)&&(e=this.value),100<this.value&&(e=100),this.value<0&&(e=0),c(e)}),o.bind("click",function(){var t=n.val();100<++t&&(t=100),c(t)}),i.bind("click",function(){var t=n.val();--t<0&&(t=0),c(t)})})},label:"<e-wordcloud-chart>",templateId:"114473474859453649",isFree:"1",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"20.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"词语",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"权重",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:null,font:{fontSize:"13",color:"#313131",fontFamily:"noto"},tooltip:!0,colors:{type:"single",list:[0]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1},display:{fontSizeMin:"13",fontSizeMax:"45",fontFamily:"noto",outerShape:"circle",outerImgUrl:"circle.png",textDirection:"横向"}},function_type:["比较类"],chart_type:"其他",title:"词云图",thumb:"https://image.dydata.io/7cGzb2aZxoeV6oVRiUnFcf.png?imageView2/2/w/500/quality/90"},{projectId:"444746070325460999",blockId:"155193846446699135",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["厂商品牌","覆盖率"],["苹果",27.7],["华为",19.61],["OPPO",15.06],["vivo",12.07],["小米",9.48]]],url:"",download:!1},label:"<e-pierosetype-chart>",templateId:"444746070325460999",isFree:"0",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"名称",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"值",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:null,font:{fontSize:"13",color:"#313131",fontFamily:"noto"},tooltip:!0,label:{display:!0,positionOptions:["外部","内部"],positionChoice:"外部",contentOption:["名称","百分比","数值"],contentChoice:["名称","百分比"]},colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["占比类"],chart_type:"饼图",title:"变形饼图",thumb:"https://image.dydata.io/HscHuHwcLRLUuQDMh3ZsTS.jpg?imageView2/2/w/500/quality/90"},{projectId:"444746070325460997",blockId:"155193846456807908",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["受教育水平","占比（%）"],["大学本科",63],["大学专科",16.9],["硕士",12.8],["高中及以下",5.5],["博士及以上",1.8]]],url:"",download:!1},label:"<e-piebasic-chart>",templateId:"444746070325460997",isFree:"0",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"名称",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"值",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:null,font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["外部","内部"],positionChoice:"外部",contentOption:["名称","百分比","数值"],contentChoice:["名称","百分比"]},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["占比类"],chart_type:"饼图",title:"基础饼图",thumb:"https://image.dydata.io/E8hjxBcbsDqAkMBMmTgoN2.jpg?imageView2/2/w/500/quality/90"},{projectId:"444746070325460998",blockId:"155193846460527311",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["年龄","观众比例（%）"],["25-34岁",42.9],["19-24岁",30.9],["18岁以下 ",15.2],["45岁以上",7.6],["35-44岁",3.4]]],url:"",download:!1},label:"<e_piedoughnut_chart>",templateId:"444746070325460998",isFree:"0",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"名称",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"值",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:null,font:{fontSize:"13",color:"#313131",fontFamily:"noto"},tooltip:!0,label:{display:!0,positionOptions:["外部","内部"],positionChoice:"外部",contentOption:["名称","百分比","数值"],contentChoice:["名称","百分比"]},colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["比较类","比例类","占比类"],chart_type:"饼图",title:"基础环形图",thumb:"https://image.dydata.io/KDMMBTa8PNGi37HCcgWcMY.jpg?imageView2/2/w/500/quality/90"},{projectId:"4544734748594536433",blockId:"155193846469289546",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["年份","衣","食","住","行","娱"],[2006,1026.9,5249,1435.7,2332.8,2431.7],[2007,1330.1,5725.5,1212.1,3453.7,2253.7],[2008,1520.6,7108.6,1646.2,3373.2,2874.5],[2009,1593.1,7344.8,2213.2,3498.7,3139],[2010,1794.1,7277,2166.2,4076.5,3363.3],[2011,2053.8,8906,2425.7,3808.4,3746.4],[2012,2111.2,9655.6,1790.5,4563.8,3723.7]]],url:"",download:!1},label:"<e-linemultiple-chart>",templateId:"4544734748594536433",isFree:"0",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"对象",index:0,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["上面","下面"],positionChoice:"上面"},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["趋势类"],chart_type:"线形图",title:"多条折线图",thumb:"https://image.dydata.io/uXtwEwjXpvKhfKB7hy9nt.jpg?imageView2/2/w/500/quality/90"},{projectId:"5612096174443311134",blockId:"155193846464349750",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["省份","全国","北京市","上海市","广州市","深圳市"],[2010,5032,17782,14464,11921,19170],[2011,5357.1,16851.95,14603.24,12103.52,21350],[2012,5790.99,17021.63,14061.37,13162.67,19589.82],[2013,6237,18553,16420,15330,24402],[2014,6324,18833,16787,15719,27723],[2015,6793,22633,20949,14612,33942],[2016,7476,27497,24747,16384,45146]]],url:"",download:!1},label:"<d-stepline-chart>",templateId:"5612096174443311134",isFree:"1",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"X轴对象",index:0,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["上面","下面"],positionChoice:"上面"},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["趋势类"],chart_type:"线形图",title:"多条阶梯折线图",thumb:"https://image.dydata.io/Biwgk5YpZZCctseHmaC7ok.jpg?imageView2/2/w/500/quality/90"},{projectId:"4544734748594536434",blockId:"155193846451462384",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["年份","特种片","纪录片","动画片","科教片","故事片"],["2010年",29,36,36,74,176],["2011年",25,46,44,96,208],["2012年",46,35,53,94,325],["2013年",38,38,49,141,288],["2014年",43,45,60,72,300],["2015年",37,58,71,116,336],["2016年",44,52,69,87,422]]],url:"",download:!1},label:"<e-lineareastack-chart>",templateId:"4544734748594536434",isFree:"1",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"对象",index:0,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["上面","下面"],positionChoice:"上面"},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["趋势类"],chart_type:"面积图",title:"堆叠面积图",thumb:"https://image.dydata.io/BCgbUyS9rP6XUD7WjLaZKU.jpg?imageView2/2/w/500/quality/90"},{projectId:"444734748594536323",blockId:"155193846443061602",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["地区","销量"],["华东",4668],["华北",3775],["西南",2912],["东北",2200],["华中",1259],["西北",700],["华南",403]]],url:"",download:!1},label:"<e-barbasic-chart>",templateId:"444734748594536323",isFree:"0",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"名称",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"值",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["上面","内部居下"],positionChoice:"上面"},tooltip:!0,colors:{type:"single",list:[0]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["比较类"],chart_type:"柱状图",title:"基础柱状图",thumb:"https://image.dydata.io/S9mQy7TtDPRefubPR9f5hY.jpg?imageView2/2/w/500/quality/90"},{projectId:"3612096174443311105",blockId:"155193846448389252",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["省份","全国","北京市","上海市","广州市","深圳市"],[2008,3800,12418,8195,9123,12665],[2010,5032,17782,14464,11921,19170],[2012,5790.99,17021.63,14061.37,13162.67,19589.82],[2014,6324,18833,16787,15719,24723],[2016,7476,27497,24747,16384,45146]]],url:"",download:!1},label:"<e-barmultiple-chart>",templateId:"3612096174443311105",isFree:"0",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"20.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"X轴对象",index:0,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["上面","内部居下"],positionChoice:"上面"},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["比较类"],chart_type:"柱状图",title:"分组柱状图",thumb:"https://image.dydata.io/CYVkrHvBASa6Nz3aUSHPSj.jpg?imageView2/2/w/500/quality/90"},{projectId:"3612096174443311107",blockId:"155193846453436874",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["年份","手机游戏","平板游戏","客户端游戏","家用游戏机","网页游戏"],[2009,7664,747,5334,2546,2648],[2012,10286,1195,4731,1909,2423],[2015,13094,2277,4572,2798,2182],[2018,14964,5943,5495,3378,1596],[2021,17968,11385,4116,3371,1356]]],url:"",download:!1},label:"<e-barstack-chart>",templateId:"3612096174443311107",isFree:"0",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"X轴对象",index:0,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,positionOptions:["内部居中","内部居下"],positionChoice:"内部居中"},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["比较类"],chart_type:"柱状图",title:"堆叠柱状图",thumb:"https://image.dydata.io/XJcYbs1sgp8RoYQCFQ2YTh.jpg?imageView2/2/w/500/quality/90"},{projectId:"4612096174443311107",blockId:"155193846447746020",type:"chart",dataSrc:{srcType:"local",dataType:"object-table",data:[[["年份","国家","GDP","人均寿命","人口"],["1990","Australia","28604","77","17096869"],["1990","Canada","31163","77.4","27662440"],["1990","China","1516","68","1154605773"],["1990","Cuba","13670","74.7","10582082"],["1990","Finland","28599","75","4986705"],["1990","France","29476","77.1","56943299"],["1990","Germany","31476","75.4","78958237"],["1990","Iceland","28666","78.1","254830"],["1990","India","1777","57.7","870601776"],["1990","Japan","29550","79.1","122249285"],["1990","North Korea","2076","67.9","20194354"],["1990","South Korea","12087","72","42972254"],["1990","New Zealand","24021","75.4","3397534"],["1990","Norway","43296","76.8","4240375"],["1990","Poland","10088","70.8","38195258"],["1990","Russia","19349","69.6","147568552"],["1990","Turkey","10670","67.3","53994605"],["1990","United Kingdom","26424","75.7","57110117"],["1990","United States","37062","75.4","252847810"],["2015","Australia","44056","81.8","23968973"],["2015","Canada","43294","81.7","35939927"],["2015","China","13334","76.9","1376048943"],["2015","Cuba","21291","78.5","11389562"],["2015","Finland","38923","80.8","5503457"],["2015","France","37599","81.9","64395345"],["2015","Germany","44053","81.1","80688545"],["2015","Iceland","42182","82.8","329425"],["2015","India","5903","66.8","1311050527"],["2015","Japan","36162","83.5","126573481"],["2015","North Korea","1390","71.4","25155317"],["2015","South Korea","34644","80.7","50293439"],["2015","New Zealand","34186","80.6","4528526"],["2015","Norway","64304","81.6","5210967"],["2015","Poland","24787","77.3","38611794"],["2015","Russia","23038","73.13","143456918"],["2015","Turkey","19360","76.5","78665830"],["2015","United Kingdom","38225","81.4","64715810"],["2015","United States","53354","79.1","321773631"]]],url:"",download:!1},label:"<e-scatterbubblegradient-chart>",templateId:"4612096174443311107",isFree:"1",templateSwitch:"obj-n-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"X轴",index:2,allowType:["number"],isLegend:!1,function:"vCol",configurable:!0},{name:"Y轴",index:3,allowType:["number"],isLegend:!1,function:"vCol",configurable:!0},{name:"分类",index:0,allowType:["string"],isLegend:!0,function:"typeCol",configurable:!0},{name:"半径",index:4,allowType:["number"],isLegend:!1,function:"vCol",configurable:!0},{name:"对象",index:1,allowType:["string"],isLegend:!1,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:null,color:"#ccc"},color:"#313131",x:{labelShow:!0,name:"",range:[]},y:{labelShow:!0,name:"",range:[]}},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},tooltip:!0,colors:{type:"multiple",list:[0,1]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["趋势类","分布类"],chart_type:"散点图",title:"分组气泡图",thumb:"https://image.dydata.io/RmKzotzGHBXmbBkVBQwors.jpg?imageView2/2/w/500/quality/90"},{projectId:"5544734748594536491",blockId:"155193846462058495",type:"chart",dataSrc:{srcType:"local",dataType:"cross-table",data:[[["品牌","电池寿命","品牌价值","合约费用","设计与质量","网络","屏幕大小","价格","智能"],["iPhone",22,28,29,17,22,2,21,50],["Samsung",27,16,35,13,20,13,35,38],["Nokia",26,10,30,14,22,4,41,30]]],url:"",download:!1},label:"<d-filter-radar-chart>",templateId:"5544734748594536491",isFree:"0",templateSwitch:"cross",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"20.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"对象",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:{grid:{show:"x",color:"#ccc"},color:"#313131",x:null,y:null},font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0},tooltip:!0,colors:{type:"multiple",list:[0,1,2]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["比较类"],chart_type:"极坐标图",title:"多维雷达图",thumb:"https://image.dydata.io/5W4SYUS2miLxZEgWQkVWrH.jpg?imageView2/2/w/500/quality/90"},{projectId:"5544734748594536339",blockId:"155193846453925093",type:"chart",dataSrc:{srcType:"local",dataType:"obejct-table",data:[[["类型","值"],["浏览网站",100],["放入购物车",70],["生成订单",60],["支付订单",40],["完成交易",20]]],url:"",download:!1},label:"<e-funnelcustomize-chart>",templateId:"5544734748594536339",isFree:"1",templateSwitch:"key-value",theme:{themeId:"16",name:"默认主题",colors:["#00aeef","#c759a1","#5552a3","#00bef3","#d07cb3","#6a65ad","#6ecff6","#dda6cc","#908ac2","#afe2fa","#e7c4dd","#b5b1d8","#d2eefc","#f0ddec","#d5d2ea"],fonts:{fontSize:"13",color:"#313131",fontFamily:"noto"},grid:{color:"#ccc"},backgroundColor:"#FFFFFF",axis:{color:"#313131"},price:"0.0"},props:{size:{height:"400",width:"500",ratio:null,rotate:0},map:[[{name:"名称",index:0,allowType:["string"],isLegend:!0,function:"objCol",configurable:!1},{name:"值",index:1,allowType:["number"],isLegend:!1,function:"vCol",configurable:!1}]],legend:{show:!0,xPosition:"center",yPosition:"bottom"},axis:null,font:{fontSize:"13",color:"#313131",fontFamily:"noto"},label:{display:!0,contentOption:["名称","百分比","数值"],contentChoice:["名称","百分比","数值"]},tooltip:!0,colors:{type:"multiple",list:[0,1,2,3,4]},backgroundColor:"",titleDisplay:{text:"",xPosition:"center",yPosition:"top",fontSize:"14",color:"#000000",fontFamily:"Noto Sans",show:!1}},function_type:["流向类"],chart_type:"漏斗图",title:"漏斗图",thumb:"https://image.dydata.io/5R2vjRGb3R1wxoY1vAPJ8J.jpg?imageView2/2/w/500/quality/90"}],o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var n=function(){function r(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=locked("U2FsdGVkX1/u6EfnJcBwjl1lkrkHd1SLbqY/JBKMPPGUREtzJjAbYQ==");if(t.clientId!==n)throw new Error("client id mismatch");window.d3Chart.setUserMd(t.clientId);var o={config:!0===t.showConfig,downloadImage:"",exportImage:t.exportImage,chartJSON:t.chartJSON,chartColorList:t.chartColorList?t.chartColorList:[["black","white","blanchedalmond","rgb(255, 128, 0);","hsv 100 70 50"],["red","yellow","green","blue","violet"]]};if(!t.chartJSON)throw new Error("need chart json");this.block=this.deepClone(t.chartJSON),this.echartsWordCloudOptions={tooltip:{},series:[{type:"wordCloud",gridSize:2,sizeRange:[12,50],rotationRange:[-90,90],shape:"pentagon",width:600,height:400,drawOutOfBound:!0,textStyle:{normal:{color:function(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}},emphasis:{shadowBlur:10,shadowColor:"#333"}},data:[{name:"Sam S Club",value:1e4,textStyle:{normal:{color:"black"},emphasis:{color:"red"}}},{name:"Macys",value:6181},{name:"Amy Schumer",value:4386},{name:"Jurassic World",value:4055},{name:"Charter Communications",value:2467},{name:"Chick Fil A",value:2244},{name:"Planet Fitness",value:1898},{name:"Pitch Perfect",value:1484},{name:"Express",value:1112},{name:"Home",value:965},{name:"Johnny Depp",value:847},{name:"Lena Dunham",value:582},{name:"Lewis Hamilton",value:555},{name:"KXAN",value:550},{name:"Mary Ellen Mark",value:462},{name:"Farrah Abraham",value:366},{name:"Rita Ora",value:360},{name:"Serena Williams",value:282},{name:"NCAA baseball tournament",value:273},{name:"Point Break",value:265}]}]},this.clipboardCache="";var i=this;this.tableOptions={data:this.block.dataSrc.data[0],manualColumnResize:!0,colHeaders:!0,rowHeaders:!0,className:"htMiddle",minCols:8,minRows:15,minSpareCols:1,minSpareRows:1,rowHeights:28,colWidths:100,copyable:!0,sortIndicator:!0,columnSorting:!1,allowEmpty:!1,afterCopy:function(t){i.clipboardCache=e.stringify(t)},afterCut:function(t){i.clipboardCache=e.stringify(t)},afterPaste:function(t){i.clipboardCache=e.stringify(t)}};var a={block:"",settingElement:document.getElementById("setting"),downloadElement:"",chartInstance:"",tableInstance:"",minValue:"",maxValue:"",fontFamilyListText:[],positionList:["上居左","上居中","上居右","下居左","下居中","下居右"],gridPositionList:["全部显示","横向网络","纵向网络","不显示"],axisLabelPositionList:["全部显示","X轴显示","Y轴显示","不显示"]};this.opts=Object.assign({},t,o,a),this.getLocalFontFamilyList(),this.createChartTemplateListBox(),this.__initChartEditor(),this.createEditorBox(),this.renderChart()}return e(r,[{key:"__initChartEditor",value:function(){this.opts.config?this.opts.settingElement.style.display="block":this.opts.settingElement.style.display="none",this.createSettingHeader(),this.createSettingContent(),this.createTable(),this.setHandsontableContextMenu(),this.bindSettingTitleClickHandler(),this.bindInputBlurHandler(),this.setFirstSettingActive(),this.__initTable()}},{key:"bindSettingTitleClickHandler",value:function(){$(".setting-title").click(function(){$(this).parents(".setting-group").toggleClass("active").siblings().removeClass("active")})}},{key:"__initTable",value:function(){var e=this,n=this.opts.tableInstance;n.addHook("afterChange",function(t){e.updateTable(t,n),e.uploadColorSetting()}),n.addHook("afterRemoveRow",function(t){e.updateTable(t,n),e.uploadColorSetting()}),n.addHook("afterRemoveCol",function(t){e.updateTable(t,n),e.uploadColorSetting()}),n.addHook("afterUndo",function(t){e.updateTable(t,n),e.uploadColorSetting()})}},{key:"updateTable",value:function(t,e){if(t){for(var n=e.countCols(),o=e.countRows(),i=n,a=n-1;0<=a;a--)if(!e.isEmptyCol(a)){i=a;break}for(var r=o,l=o-1;0<=l;l--)if(!e.isEmptyRow(l)){r=l;break}var s=e.getData(0,0,r,i);this.block.dataSrc.data[0]=s,this.opts.chartInstance.setOption(this.block)}}},{key:"setHandsontableContextMenu",value:function(){var o=this,i=this.opts.tableInstance;this.opts.tableInstance.updateSettings({contextMenu:{callback:function(t,e){},items:{cut:{name:"剪切"},copy:{name:"复制"},hr1:"---------",paste:{name:"粘贴",disabled:function(){return 0===o.clipboardCache.length},callback:function(){var t=this.getPlugin("copyPaste");this.listen(),t.paste(o.clipboardCache),$(".innerBorderLeft .wtHolder").scrollLeft(0),$(".innerBorderLeft .wtHolder").scrollTop(0)}},hr2:"---------",remove:{name:"清除",callback:function(){return i.emptySelectedCells()}},remove_row:{name:"删除所在行"},remove_col:{name:"删除所在列",hidden:function(){return!1},callback:function(t,e,n){var a=new Array;this.getSelectedRange().forEach(function(t){var e=t.from,n=t.to.col-e.col;if(0<n)for(var o=0;o<=n;o++){var i=[e.col+o,1];a.push(i)}else if(0==n){i=[e.col,1];a.push(i)}}),this.alter("remove_col",a),o.uploadColorSetting(),o.updateTable([],i)}},hr3:"---------",row_above:{name:"在上方插入一行"},row_below:{name:"在下方插入一行"},col_left:{name:"在左侧插入一列"},col_right:{name:"在右侧插入一列"}}}},!1)}},{key:"stringify",value:function(t){var e,n,o,i,a,r="";for(e=0,n=t.length;e<n;e+=1){for(o=0,i=t[e].length;o<i;o+=1)0<o&&(r+="\t"),"string"==typeof(a=t[e][o])?-1<a.indexOf("\n")?r+='"'+a.replace(/"/g,'""')+'"':r+=a:r+=null==a?"":a;r+="\n"}return r}},{key:"createChartTemplateListBox",value:function(){var t=document.createElement("ul");t.id="chartListBox",t.innerHTML="\n      "+this.createChartList()+"\n    ",document.body.appendChild(t),this.bindChartListClickHandler()}},{key:"bindChartListClickHandler",value:function(){var e=document.querySelectorAll(".chart-list");if(e)for(var n=this,t=function(t){e[t].addEventListener("click",function(){n.reloadChart(i[t])},!1)},o=0;o<e.length;o++)t(o)}},{key:"reloadChart",value:function(t){if(this.block=this.deepClone(t),this.tableOptions.data=this.deepClone(t).dataSrc.data[0],document.getElementById("editor")&&this.remove("#editor"),document.querySelector(".sp-container"))for(var e=document.querySelectorAll(".sp-container"),n=0;n<e.length;n++)e[n]&&this.remove(".sp-container");this.createEditorBox(),this.renderChart(),this.opts.settingElement.innerHTML="",this.__initChartEditor()}},{key:"setFirstSettingActive",value:function(){document.querySelectorAll(".setting-group")[0].classList.add("active")}},{key:"exportImage",value:function(t,e){this.filterProjectFonts();var n=document.getElementById("editor");if(n){var o=t.scale;o=o?5<o?5:o:1,t.transparent||(t.transparent=!1),domtoimage.toPng(n,{width:500*o,height:400*o,style:{border:"none",transform:"scale("+o+")","transform-origin":"top left",background:!1===t.transparent?t.background?t.background:"#fff":"transparent"}}).then(function(t){e(t)}).catch(function(t){console.error("oops, something went wrong!",t)})}}},{key:"updateJSON",value:function(t,e){t&&(this.reloadChart(t),e&&e())}},{key:"getJSON",value:function(t){t(this.block)}},{key:"createTable",value:function(){var t=document.createElement("div");t.className="edit-box table",t.id="table",this.opts.settingElement.appendChild(t),this.opts.tableInstance=new Handsontable(document.getElementById("table"),this.tableOptions)}},{key:"createSettingHeader",value:function(){var t=document.createElement("div");t.className="setting-header",t.innerHTML='\n      <div class="edit-block">编辑图表</div><div class="edit-table">编辑数据</div>\n    ',this.opts.settingElement.appendChild(t),t.addEventListener("click",function(t){var e=document.querySelectorAll(".edit-box"),n=document.querySelector(".edit-block"),o=document.querySelector(".edit-table");switch(t.target.className){case"edit-block":n.style.color="#e6794a",o.style.color="#333",e[0].style.display="block",e[1].style.position="fixed",e[1].style.left="-9999px";break;case"edit-table":n.style.color="#333",o.style.color="#e6794a",e[0].style.display="none",e[1].style.position="relative",e[1].style.left="0"}},!1)}},{key:"createSettingContent",value:function(){var t=document.createElement("div");t.className="edit-box",t.id="setting-box",this.opts.settingElement.appendChild(t),this.block.props.label&&this.createLabelSetting(),"114473474859453649"===this.block.templateId?this.createWordcloudColorSettinge():("key-value"===this.block.templateSwitch&&this.createMapSetting(),this.createTitleSetting(),this.createFontSetting(),this.createColorSetting(),this.createLegendSetting()),this.createAxisSetting(),this.createTooltipSetting()}},{key:"createLabelSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">标签</div>\n      <div class="setting-content">\n\n        <div class="small-title">标签显示</div>\n        <input class="switch switch-anim title-margin" type="checkbox" id="labelSwitch">\n\n        '+this.createyLabelPosition()+"\n\n        "+this.createyLabelContent()+"\n        \n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindLabelSwitchHandler(),this.bindLabelPositionHandler(),this.bindLabelCheckedboxChangeHandler()}},{key:"createLabelPositionList",value:function(t){if(t){for(var e="",n=0;n<t.length;n++)e+='\n          <option value="'+t[n]+'">'+t[n]+"</option>\n        ";return e}return""}},{key:"createLabelCheckBox",value:function(t){if(t){for(var e="",n=0;n<t.length;n++)e+='\n          <div class="checked-list">\n            <input value="'+t[n]+'" class="label-checked-input" type="checkbox" id="map-'+n+'">\n            <label for="map-'+n+'">'+t[n]+"</label>\n          </div>\n        ";return e}return""}},{key:"createyLabelPosition",value:function(){return this.block.props.label.positionOptions?'\n        <div class="small-title color-picker-margin">位置</div>\n        <select id="labelPositionList" class="title-margin">\n          '+this.createLabelPositionList(this.block.props.label.positionOptions)+"\n        </select>\n      ":""}},{key:"createyLabelContent",value:function(){return this.block.props.label.contentOption?'\n        <div class="small-title">显示内容</div>\n        <div class="checked-box">\n          '+this.createLabelCheckBox(this.block.props.label.contentOption)+"\n        </div>\n      ":""}},{key:"bindLabelSwitchHandler",value:function(){var t=document.getElementById("labelSwitch");if(t){this.block.props.label.display?t.setAttribute("checked","checked"):t.removeAttribute("checked");var e=this;t.addEventListener("change",function(t){e.block.props.label.display=!!this.checked,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindLabelPositionHandler",value:function(){var t=document.getElementById("labelPositionList");if(t){var e=this.block.props.label.positionOptions.indexOf(this.block.props.label.positionChoice);t[e=-1<e?e:0]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(t){n.block.props.label.positionChoice=t.target.value,n.opts.chartInstance.setOption(n.block)})}}},{key:"bindLabelCheckedboxChangeHandler",value:function(){var t=document.querySelectorAll(".label-checked-input");if(t){this.setCurrentSelected(t,this.block.props.label.contentChoice);for(var n=this,o=this.deepClone(this.block.props.label.contentChoice),e=0;e<t.length;e++)t[e].addEventListener("change",function(t){if(this.checked)o.push(t.target.value);else{var e=o.indexOf(t.target.value);0<=e&&o.splice(e,1)}n.block.props.label.contentChoice=o,n.opts.chartInstance.setOption(n.block)})}}},{key:"setCurrentSelected",value:function(t,e){if(t)for(var n=0;n<t.length;n++){if(0<=e.indexOf(t[n].value))t[this.block.props.label.contentOption.indexOf(t[n].value)].setAttribute("checked","checked")}}},{key:"createMapSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">映射</div>\n      <div class="setting-content">\n        '+this.createMapSettingList()+"\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindMapSelectHandler()}},{key:"createMapSettingList",value:function(){for(var t=this.block.props.map[0],e=this.block.dataSrc.data[0][0].filter(function(t){return null!==t}),n="",o=0;o<t.length;o++)n+='\n        <div class="small-title">'+t[o].name+'</div>\n        <select class="map-list title-margin">\n          '+this.createMapSettingOptionList(e)+"\n        </select>\n      ";return n}},{key:"createMapSettingOptionList",value:function(t){for(var e="",n=0;n<t.length;n++)e+='\n        <option value="'+n+'">'+t[n]+"</option>\n      ";return e}},{key:"bindMapSelectHandler",value:function(){var t=document.querySelectorAll(".map-list"),n=this.block.props.map[0],o=this;if(t)for(var e=function(e){t[e]&&(t[e][n[e].index].selected=!0,t[e].addEventListener("change",function(t){o.block.props.map[0][e].index=Number(t.target.value),o.opts.chartInstance.setOption(o.block)},!1))},i=0;i<t.length;i++)e(i)}},{key:"createTitleSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">标题</div>\n      <div class="setting-content">\n\n        <div class="small-title">标题显示</div>\n        <input class="switch switch-anim title-margin" type="checkbox" id="titleSwitch">\n\n        <div class="small-title">名称</div>\n        <input class="title-input title-margin input-text" type="text" id="titleInput">\n\n        <div class="small-title">颜色</div>\n        <input type="text" id="titleColorPicker">\n\n        <div class="small-title color-picker-margin">字体</div>\n        <select id="titleFontFamily" class="title-margin">\n          '+this.createFontSizeList()+'\n        </select>\n\n        <div class="small-title">字号(px)</div>\n        <div id="titleInputRangeBox" class="title-margin">\n          '+this.createInputRange(this.block.props.titleDisplay.fontSize)+'\n        </div>\n\n        <div class="small-title">位置</div>\n        <select id="titlePositionList" class="title-margin">\n          '+this.createPositionList()+"\n        </select>\n        \n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindTitleSwitchHandler(),this.bindTitleInputHandler(),this.bindTitleColorPickerHandler(),this.bindTitleSelectHandler(),this.bindTitleInputRangeHandler(),this.bindTitlePositionHandler()}},{key:"bindTitleSwitchHandler",value:function(){var t=document.getElementById("titleSwitch");if(t){this.block.props.titleDisplay.show?t.setAttribute("checked","checked"):t.removeAttribute("checked");var e=this;t.addEventListener("change",function(t){e.block.props.titleDisplay.show=!!this.checked,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindTitleInputHandler",value:function(){var t=document.getElementById("titleInput");if(t){var e=this;t.value=this.block.props.titleDisplay.text,t.addEventListener("blur",function(t){e.block.props.titleDisplay.text=t.target.value,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindTitleColorPickerHandler",value:function(){var e=this;$("#titleColorPicker").spectrum({showPaletteOnly:!0,showPalette:!0,hideAfterPaletteSelect:!0,color:e.block.props.titleDisplay.color,palette:e.opts.chartColorList,change:function(t){e.block.props.titleDisplay.color=t.toHexString(),e.opts.chartInstance.setOption(e.block)}})}},{key:"bindTitleSelectHandler",value:function(){var t=document.getElementById("titleFontFamily");if(t){var e=this.opts.fontFamilyListText.indexOf(this.block.props.titleDisplay.fontFamily);t[e=-1<e?e:0]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(t){n.block.props.titleDisplay.fontFamily=t.target.value,n.opts.chartInstance.setOption(n.block)})}}},{key:"bindTitleInputRangeHandler",value:function(){var t=document.querySelector("#titleInputRangeBox .input-range");if(t){var e=this;$(t).RangeSlider({min:0,max:100,step:1,callback:function(){e.block.props.titleDisplay.fontSize=t.value,e.opts.chartInstance.setOption(e.block)}})}}},{key:"bindTitlePositionHandler",value:function(){var t=document.getElementById("titlePositionList");if(t){var e=0;switch(this.block.props.titleDisplay.yPosition){case"top":switch(this.block.props.titleDisplay.xPosition){case"left":e=0;break;case"center":e=1;break;case"right":e=2}break;case"bottom":switch(this.block.props.titleDisplay.xPosition){case"left":e=3;break;case"center":e=4;break;case"right":e=5}}t[e]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(){switch(t.selectedIndex){case 0:n.block.props.titleDisplay.xPosition="left",n.block.props.titleDisplay.yPosition="top";break;case 1:n.block.props.titleDisplay.xPosition="center",n.block.props.titleDisplay.yPosition="top";break;case 2:n.block.props.titleDisplay.xPosition="right",n.block.props.titleDisplay.yPosition="top";break;case 3:n.block.props.titleDisplay.xPosition="left",n.block.props.titleDisplay.yPosition="bottom";break;case 4:n.block.props.titleDisplay.xPosition="center",n.block.props.titleDisplay.yPosition="bottom";break;case 5:n.block.props.titleDisplay.xPosition="right",n.block.props.titleDisplay.yPosition="bottom"}n.opts.chartInstance.setOption(n.block)})}}},{key:"createColorSetting",value:function(){var t=document.createElement("div");t.className="setting-group";var e=this.formatDataSrc();t.innerHTML='\n      <div class="setting-title">颜色</div>\n      <div class="setting-content" id="colorSetting">\n        '+this.createColorPicker(e)+"\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.__initColorPicker(e)}},{key:"createWordcloudColorSettinge",value:function(){var t=document.createElement("div");t.className="setting-group";var e=this.formatDataSrc();t.innerHTML='\n      <div class="setting-title">颜色</div>\n      <div class="setting-content">\n\n        <div class="wordcloud-color-setting">\n          <div class="use-single-color">使用单色</div>\n          <input style="margin-bottom: 0;" class="switch switch-anim" type="checkbox" id="wordcloudColorSwitch">\n        </div>\n\n        '+this.createColorPicker(e,!0)+"\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindWordcloudColorSwitchHandler(),this.__initColorPicker(e)}},{key:"bindWordcloudColorSwitchHandler",value:function(){document.getElementById("wordcloudColorSwitch")}},{key:"createColorPicker",value:function(t,e){for(var n="",o=0;o<t.length;o++)n+='\n        <div class="color-group">\n          <input type="text" class="color-box'+o+'">\n          <span>'+(e?"":t[o])+"</span>\n        </div>\n      ";return n}},{key:"__initColorPicker",value:function(t){var n=this,e=void 0,o=this.block.props.colors.list,i=t.length;if(t.length>o.length){for(var a=[],r=0;r<Math.ceil(i/o.length);r++)a.push.apply(a,u(o));e=a.slice(0,i)}else e=this.block.props.colors.list;for(var l=this.block.theme.colors,s=this.formatColor(e,l),c=function(e){$(".color-box"+e).spectrum({showPaletteOnly:!0,showPalette:!0,hideAfterPaletteSelect:!0,color:s[e],palette:n.opts.chartColorList,change:function(t){n.block.props.colors.list[e]=t.toHexString(),n.opts.chartInstance.setOption(n.block)}})},d=0;d<t.length;d++)c(d)}},{key:"uploadColorSetting",value:function(){var t=this.formatDataSrc(),e=document.getElementById("colorSetting");e.innerHTML="";var n=document.createElement("div");n.innerHTML=this.createColorPicker(t),e.appendChild(n),this.__initColorPicker(t)}},{key:"createAxisSetting",value:function(){if(this.block.props.axis.grid){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">轴、网格线</div>\n      <div class="setting-content">\n\n        <div class="small-title">网格线</div>\n        <select id="gridPositionList" class="title-margin">\n          '+this.createGridPositionList()+'\n        </select>\n\n        <div class="small-title">网格线颜色</div>\n        <input type="text" id="gridColorPicker">\n\n          '+this.createAxisLabelTitle()+"\n\n          "+this.createyAxisLabel()+"\n\n        \n\n        \n\n          "+this.createyAxisRange()+"\n\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindShowGridSelectedHandler(),this.bindGridColorPickerHandler(),this.bindxAxisInputHandler(),this.bindyAxisInputHandler(),this.bindShowAxisLabelSelectedHandler(),this.bindAxisColorPickerHandler(),this.block.props.axis.y.range&&(this.bindyAxisMinRangeHandler(),this.bindyAxisMaxRangeHandler())}}},{key:"createGridPositionList",value:function(){for(var t=this.opts.gridPositionList,e="",n=0;n<t.length;n++)e+='\n        <option value = "'+t[n]+'">'+t[n]+"</option>\n      ";return e}},{key:"createAxisLabelPositionList",value:function(){for(var t=this.opts.axisLabelPositionList,e="",n=0;n<t.length;n++)e+='\n        <option value = "'+t[n]+'">'+t[n]+"</option>\n      ";return e}},{key:"createAxisLabelTitle",value:function(){return"5544734748594536491"===this.block.templateId?"":'\n        <div class="small-title color-picker-margin">X轴标题</div>\n        <input class="axis-input title-margin input-text" type="text" id="xAxisInput">\n\n        <div class="small-title">Y轴标题</div>\n        <input class="axis-input title-margin input-text" type="text" id="yAxisInput">\n      '}},{key:"createyAxisLabel",value:function(){return"5544734748594536491"===this.block.templateId?"":'\n        <div class="small-title color-picker-margin">轴标签</div>\n        <select id="axisLabelPositionList" class="title-margin">\n          '+this.createAxisLabelPositionList()+"\n        </select>\n      "}},{key:"createyAxisColorPicker",value:function(){return"5544734748594536491"===this.block.templateId?"":'\n        <div class="small-title">轴颜色</div>\n        <input type="text" id="axisColorPicker">\n      '}},{key:"createyAxisRange",value:function(){return"5544734748594536491"===this.block.templateId?"":'\n        <div class="small-title color-picker-margin">y轴取值范围（Min - Max）</div>\n        <div class="y-axis-range">\n          <input id="yAxisMinRange" class="input-text" type="text" onafterpaste="if(isNaN(value))execCommand(\'undo\')" onkeyup="if(isNaN(value))execCommand(\'undo\')">\n          -\n          <input id="yAxisMaxRange" class="input-text" type="text" onafterpaste="if(isNaN(value))execCommand(\'undo\')" onkeyup="if(isNaN(value))execCommand(\'undo\')">\n        </div>\n      '}},{key:"bindShowGridSelectedHandler",value:function(){var t=document.getElementById("gridPositionList");if(t){var e=0;switch(this.block.props.axis.grid.show){case"all":e=0;break;case"x":e=1;break;case"y":e=2;break;case"none":default:e=3}t[e]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(){switch(t.selectedIndex){case 0:n.block.props.axis.grid.show="all";break;case 1:n.block.props.axis.grid.show="x";break;case 2:n.block.props.axis.grid.show="y";break;case 3:n.block.props.axis.grid.show="none"}n.opts.chartInstance.setOption(n.block)})}}},{key:"bindGridColorPickerHandler",value:function(){var e=this;$("#gridColorPicker").spectrum({showPaletteOnly:!0,showPalette:!0,hideAfterPaletteSelect:!0,color:e.block.props.axis.grid.color,palette:e.opts.chartColorList,change:function(t){e.block.props.axis.grid.color=t.toHexString(),e.opts.chartInstance.setOption(e.block)}})}},{key:"bindxAxisInputHandler",value:function(){var t=document.getElementById("xAxisInput");if(t){var e=this;t.value=this.block.props.axis.x.name,t.addEventListener("blur",function(t){e.block.props.axis.x.name=t.target.value,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindyAxisInputHandler",value:function(){var t=document.getElementById("yAxisInput");if(t){var e=this;t.value=this.block.props.axis.y.name,t.addEventListener("blur",function(t){e.block.props.axis.y.name=t.target.value,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindShowAxisLabelSelectedHandler",value:function(){var t=document.getElementById("axisLabelPositionList");if(t){var e=0;this.block.props.axis.x&&this.block.props.axis.y?e=this.block.props.axis.x.labelShow&&this.block.props.axis.y.labelShow?0:this.block.props.axis.x.labelShow?1:this.block.props.axis.y.labelShow?2:3:this.block.props.axis.x?e=this.block.props.axis.x.labelShow?0:1:this.block.props.axis.y&&(e=this.block.props.axis.y.labelShow?0:1),t[e]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(){if(4===n.opts.axisLabelPositionList.length)switch(t.selectedIndex){case 0:n.block.props.axis.x.labelShow=!0,n.block.props.axis.y.labelShow=!0;break;case 1:n.block.props.axis.x.labelShow=!0,n.block.props.axis.y.labelShow=!1;break;case 2:n.block.props.axis.x.labelShow=!1,n.block.props.axis.y.labelShow=!0;break;case 3:n.block.props.axis.x.labelShow=!1,n.block.props.axis.y.labelShow=!1}else if("X轴显示"===n.opts.axisLabelPositionList[0])switch(t.selectedIndex){case 0:n.block.props.axis.x.labelShow=!0;break;case 1:n.block.props.axis.x.labelShow=!1}else switch(t.selectedIndex){case 0:n.block.props.axis.y.labelShow=!0;break;case 1:n.block.props.axis.y.labelShow=!1}n.opts.chartInstance.setOption(n.block)})}}},{key:"bindAxisColorPickerHandler",value:function(){var e=this;$("#axisColorPicker").spectrum({showPaletteOnly:!0,showPalette:!0,hideAfterPaletteSelect:!0,color:e.block.props.axis.color,palette:e.opts.chartColorList,change:function(t){e.block.props.axis.color=t.toHexString(),e.opts.chartInstance.setOption(e.block)}})}},{key:"bindyAxisMinRangeHandler",value:function(){var t=document.getElementById("yAxisMinRange");if(t){var o=this,e=this.block.props.axis.y.range[0];t.value=e||null,t.addEventListener("blur",function(t){if(t.target.value!==o.opts.minValue){var e=t.target.value,n=o.block.props.axis.y;""!==e?(o.block.props.axis&&n.range[1]?Number(e)<Number(o.opts.maxValue)&&(n.range[0]=Number(e),o.opts.minValue=e):(n.range[0]=Number(e),o.opts.minValue=e),o.opts.chartInstance.setOption(o.block)):o.opts.minValue=""}})}}},{key:"bindyAxisMaxRangeHandler",value:function(){var t=document.getElementById("yAxisMaxRange");if(t){var o=this,e=this.block.props.axis.y.range[1];t.value=e||null,t.addEventListener("blur",function(t){if(t.target.value!==o.opts.maxValue){var e=t.target.value,n=o.block.props.axis.y;""!==e?(Number(e)>Number(o.opts.minValue)&&(n.range[1]=Number(e),o.opts.maxValue=e),o.opts.chartInstance.setOption(o.block)):o.opts.maxValue=""}})}}},{key:"createFontSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">文字</div>\n      <div class="setting-content">\n        \n        <div class="small-title">文字颜色</div>\n        <input type="text" id="fontSizeColorPicker">\n\n        <div class="small-title color-picker-margin">字体</div>\n        <select id="fontSizeFontFamily" class="title-margin">\n          '+this.createFontSizeList()+'\n        </select>\n\n        <div class="small-title">字号(px)</div>\n        <div id="fontSizeInputRangeBox" class="title-margin">\n          '+this.createInputRange(this.block.props.font.fontSize)+"\n        </div>\n\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindFontSizeColorPickerHandler(),this.bindFontSizeSelectHandler(),this.bindFontSizeInputRangeHandler()}},{key:"bindFontSizeColorPickerHandler",value:function(){var e=this;$("#fontSizeColorPicker").spectrum({showPaletteOnly:!0,showPalette:!0,hideAfterPaletteSelect:!0,color:e.block.props.font.color,palette:e.opts.chartColorList,change:function(t){e.block.props.font.color=t.toHexString(),e.opts.chartInstance.setOption(e.block)}})}},{key:"bindFontSizeSelectHandler",value:function(){var t=document.getElementById("fontSizeFontFamily");if(t){var e=this.opts.fontFamilyListText.indexOf(this.block.props.font.fontFamily);t[e=-1<e?e:0]&&(t[e].selected=!0);var n=this;t.addEventListener("change",function(t){n.block.props.font.fontFamily=t.target.value,n.opts.chartInstance.setOption(n.block)})}}},{key:"bindFontSizeInputRangeHandler",value:function(){var t=document.querySelector("#fontSizeInputRangeBox .input-range");if(t){var e=this;$(t).RangeSlider({min:0,max:100,step:1,callback:function(){e.block.props.font.fontSize=t.value,e.opts.chartInstance.setOption(e.block)}})}}},{key:"createLegendSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">图例</div>\n      <div class="setting-content">\n        \n        <div class="small-title">图例显示</div>\n        <input class="switch switch-anim title-margin" type="checkbox" id="legendSwitch">\n\n        <div class="small-title">图例位置</div>\n        <select id="legendPositionList" class="title-margin">\n          '+this.createPositionList()+"\n        </select>\n\n      </div>\n    ",document.getElementById("setting-box").appendChild(t),this.bindLegendSwitchHandler(),this.bindLegendPositionHandler()}},{key:"bindLegendSwitchHandler",value:function(){var t=document.getElementById("legendSwitch");if(t){var e=this;this.block.props.legend.show?t.setAttribute("checked","checked"):t.removeAttribute("checked"),t.addEventListener("change",function(t){e.block.props.legend.show=!!this.checked,e.opts.chartInstance.setOption(e.block)})}}},{key:"bindLegendPositionHandler",value:function(){var t=document.getElementById("legendPositionList");if(t){var e=0;switch(this.block.props.legend.yPosition){case"top":switch(this.block.props.legend.xPosition){case"left":e=0;break;case"center":e=1;break;case"right":e=2}break;case"bottom":switch(this.block.props.legend.xPosition){case"left":e=3;break;case"center":e=4;break;case"right":e=5}}t[e].selected=!0;var n=this;t.addEventListener("change",function(){switch(t.selectedIndex){case 0:n.block.props.legend.xPosition="left",n.block.props.legend.yPosition="top";break;case 1:n.block.props.legend.xPosition="center",n.block.props.legend.yPosition="top";break;case 2:n.block.props.legend.xPosition="right",n.block.props.legend.yPosition="top";break;case 3:n.block.props.legend.xPosition="left",n.block.props.legend.yPosition="bottom";break;case 4:n.block.props.legend.xPosition="center",n.block.props.legend.yPosition="bottom";break;case 5:n.block.props.legend.xPosition="right",n.block.props.legend.yPosition="bottom"}n.opts.chartInstance.setOption(n.block)})}}},{key:"createTooltipSetting",value:function(){var t=document.createElement("div");t.className="setting-group",t.innerHTML='\n      <div class="setting-title">交互提示框</div>\n      <div class="setting-content">\n        \n        <div class="small-title">交互提示框显示</div>\n        <input class="switch switch-anim title-margin" type="checkbox" id="tooltipSwitch">\n\n      </div>\n    ',document.getElementById("setting-box").appendChild(t),this.bindTooltipSwitchHandler()}},{key:"bindTooltipSwitchHandler",value:function(){var t=document.getElementById("tooltipSwitch");if(t){var e=this;this.block.props.tooltip?t.setAttribute("checked","checked"):t.removeAttribute("checked"),t.addEventListener("change",function(t){e.block.props.tooltip=!!this.checked,e.opts.chartInstance.setOption(e.block)})}}},{key:"createEditorBox",value:function(){var t=document.createElement("div");t.id="editor";var e=document.getElementById("editor-box");e.style.border="1px solid #999",e.insertBefore(t,e.childNodes[0])}},{key:"createChartList",value:function(){for(var t=["词云图","变形饼图","基础饼图","基础环形图","多条折线图","多条阶梯折线图","堆叠面积图","基础柱状图","分组柱状图","堆叠柱状图","分组气泡图","多维雷达图","漏斗图"],e="",n=0;n<t.length;n++)e+='\n        <li class="chart-list">'+t[n]+"</li>\n      ";return e}},{key:"createFontSizeList",value:function(){for(var t=this.opts.fontFamilyListText,e="",n=0;n<t.length;n++)e+='\n        <option value = "'+t[n]+'">'+t[n]+"</option>\n      ";return e}},{key:"createInputRange",value:function(t){return'\n      <div class="input-container-box">\n        <input type="range" value="'+t+'" style="background-size: '+t+'% 100%;" class="input-range">\n        <div class="input-container">\n          <input type="text" value="'+t+'" min="0" max="100" class="input-text" onafterpaste="if(isNaN(value))execCommand(\'undo\')" onkeyup="if(isNaN(value))execCommand(\'undo\')">\n          <div class="num-box">\n            <div class="num-btn add">\n              <div class="text">+</div>\n            </div>\n            <div class="num-btn desc">\n              <div class="text">-</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '}},{key:"createPositionList",value:function(){for(var t=this.opts.positionList,e="",n=0;n<t.length;n++)e+='\n        <option value = "'+t[n]+'">'+t[n]+"</option>\n      ";return e}},{key:"getLocalFontFamilyList",value:function(){if(document.styleSheets[0]||document.styleSheets[0]){for(var t=document.styleSheets[0].rules||document.styleSheets[0].cssRules,e=[],n=0;n<t.length;n++)e.push(t[n].style.fontFamily);this.opts.fontFamilyListText=[].concat(u(new Set(e)))}else this.opts.fontFamilyListText=[]}},{key:"renderChart",value:function(){"114473474859453649"===this.block.templateId?(this.opts.chartInstance=echarts.init(document.getElementById("editor")),this.opts.chartInstance.setOption(this.echartsWordCloudOptions,!0)):(this.opts.chartInstance=this.getCurrentD3ChartType(),this.opts.chartInstance.setOption(this.block))}},{key:"getCurrentD3ChartType",value:function(){var t=document.getElementById("editor"),e="";switch(this.block.title){case"基础饼图":e=new window.d3Chart.PieChart(t);break;case"变形饼图":e=new window.d3Chart.DeformedPieChart(t);break;case"基础环形图":e=new window.d3Chart.DonutChart(t);break;case"多条折线图":e=new window.d3Chart.BeeLineChart(t);break;case"多条阶梯折线图":e=new window.d3Chart.StepLineChart(t);break;case"堆叠面积图":e=new window.d3Chart.StackedLinearChart(t);break;case"基础柱状图":e=new window.d3Chart.SimpleBarChart(t);break;case"分组柱状图":e=new window.d3Chart.GroupedBarChart(t);break;case"堆叠柱状图":e=new window.d3Chart.StackBarChart(t);break;case"分组气泡图":e=new window.d3Chart.GroupingBubbleChart(t);break;case"多维雷达图":e=new window.d3Chart.PolygonRadarChart(t);break;case"漏斗图":e=new window.d3Chart.FunnelChart(t)}return e}},{key:"filterProjectFonts",value:function(){var t=[];this.block.props.font&&t.push(this.block.props.font.fontFamily),this.block.props.titleDisplay&&t.push(this.block.props.titleDisplay.fontFamily);var e=t.map(function(t){return"noto"===t||"Noto Sans"===t?'"Noto Sans"':"Droid Sans Fallback"===t?'"Droid Sans Fallback"':t});document.body.setAttribute("data-json",Array.from(new Set(e)))}},{key:"bindInputBlurHandler",value:function(){for(var t=document.querySelectorAll(".input-text"),e=0;e<t.length;e++)t[e].addEventListener("keyup",function(t){13===t.keyCode&&this.blur()},!1)}},{key:"formatColor",value:function(t,e){var n=[].concat(u(t)),o=[].concat(u(e));try{for(var i=0;i<n.length;i++)isNaN(n[i])||(n[i]=o[n[i]]);return n}catch(t){console.log(t)}}},{key:"formatDataSrc",value:function(){var t=this.block.dataSrc.data[0],e=this.block.props.map[0],n=this.block.props.colors.type;if("single"===n){for(var o=void 0,i=0;i<e.length;i++)"vCol"===e[i].function&&(o=e[i].index);return[t[0][o]]}if("multiple"===n)switch(this.block.templateSwitch){case"cross":return(("5544734748594536491"===this.block.templateId?this.zip(t):t[0].filter(function(t){return null!==t}))||[]).slice(1);case"key-value":var a=this.zip(t).filter(function(t){return null!==t});return(a=a||[]).slice(1);case"obj-n-value":var r=Array.from(new Set(this.zip(t))).filter(function(t){return null!==t});return(r=r||[]).slice(1);default:return[]}}},{key:"deepClone",value:function(t){if("object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)t.hasOwnProperty(n)&&(e[n]="object"===o(t[n])?this.deepClone(t[n]):t[n]);return e}},{key:"zip",value:function(t){if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(t[n][0]);return e}}},{key:"remove",value:function(t){var e=document.querySelector(t);e&&e.parentNode.removeChild(e)}}]),r}();window.Editor=n});
