<!DOCTYPE html>

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" href="./font-face.css">

  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?07397da1b7bf662b93ece50bb615febf";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

  <script src="./plugins/d3-chart.min.js"></script>
  <script src="./plugins/d3.v5.min.js"></script>

  <script src="./plugins/handsontable.full.min.js"></script>
  <link href="./plugins/handsontable.full.css" rel="stylesheet">

  <script src="./plugins/echarts.min.js"></script>
  <script src="./plugins/echarts-wordcloud.min.js"></script>

  <script src="./plugins/common.min.js"></script>
  <script src="./plugins/util.min.js"></script>

  <script src="./index.js"></script>
  <link rel="stylesheet" href="./index.css">

</head>

<body>

  <!-- SDK 只需要图表容器即可 -->
  <div id="editor-box">
    <div id="setting"></div>

    <!-- 测试用按钮 -->
    <div id="bottom-bar">
      <div id="sdk-tool" class="tool-introduced">
        <div>图表工具</div>
        <div>本功能由<a target="_blank"
            href="https://dydata.io/appv2/#/pages/home/createproject?platform=a1&hmsr=a1&hmpl=a1%E5%81%9A%E5%9B%BE%E8%A1%A8&hmcu=&hmkw=&hmci=">镝数</a>提供
        </div>
      </div>
      <div class="export-buttons">
        <div id="sdImg">导出普通</div>
        <div id="hdImg">导出高清</div>
      </div>
      <div id="sdk-cancel">x</div>
    </div>
    <a target="_blank"
      href="https://dydata.io/appv2/#/pages/home/createproject?platform=a3&hmsr=a3&hmpl=a3%E5%81%9A%E5%9B%BE%E8%A1%A8&hmcu=&hmkw=&hmci=">
      <div id="sdk-logo" class="logo"></div>
    </a>

  </div>

  <script>

    // 实例化对象
    const editor = new Editor({
      showConfig: true,
      clientId: 'c53822d351882c0c49acafc7c44f09ca'
    });

    // 导出普通图片接口
    document.getElementById('sdImg').addEventListener('click', function () {
      editor.exportImage({
        scale: 1,
        transparent: false
      }, function (res) {
        parent.postMessage({
          sdImg: res
        }, '*');
      })
    }, false)

    // 导出高清图片接口
    document.getElementById('hdImg').addEventListener('click', function () {
      editor.exportImage({
        scale: 2,
        transparent: false
      }, function (res) {
        parent.postMessage({
          hdImg: res
        }, '*');
      })
    }, false)

    // 取消按钮
    document.getElementById('sdk-cancel').addEventListener('click', function () {
      editor.getJSON(function (res) {
        // console.log(res)
      })
      parent.postMessage({
        closeDialog: true
      }, '*');
    }, false)

  </script>

</body>

</html>